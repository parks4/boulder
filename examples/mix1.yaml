metadata:
  title: Converted from mix1.py
  description: |-
    Mixing two streams.

    ==================

    *A Cantera example (from https://cantera.org/3.1/examples/python/reactors/mix1.html
    used in Boulder to showcase the sim2stone functionality: generating a simulation
    yaml file from a :py:class:`~cantera.ReactorNet` object*

    Since reactors can have multiple inlets and outlets, they can be used to
    implement mixers, splitters, etc. In this example, air and methane are mixed
    in stoichiometric proportions. Due to the low temperature, no reactions occur.
    Note that the air stream and the methane stream use *different* reaction
    mechanisms, with different numbers of species and reactions. When gas flows
    from one reactor or reservoir to another one with a different reaction
    mechanism, species are matched by name. If the upstream reactor contains a
    species that is not present in the downstream reaction mechanism, it will be
    ignored. In general, reaction mechanisms for downstream reactors should
    contain all species that might be present in any upstream reactor.

    Compare this approach for the transient problem to the method used for the
    steady-state problem in :doc:`mixing.py <../thermo/mixing>`.

    Requires: cantera >= 3.1.0, graphviz

    .. tags:: Python, thermodynamics, reactor network, mixture
  source_file: mix1.py
phases:
  gas:
    mechanism: gri30.yaml
settings: {}

nodes:
- id: Air Reservoir
  Reservoir:
    temperature: 300.0
    pressure: 101325.00000000003
    composition: N2:0.78,O2:0.21,AR:0.01
  mechanism: air.yaml
  description: |-
    Create reservoirs for the two inlet streams and for the outlet stream.  The
    upstream reservoirs could be replaced by reactors, which might themselves be
    connected to reactors further upstream. The outlet reservoir could be
    replaced with a reactor with no outlet, if it is desired to integrate the
    composition leaving the mixer in time, or by an arbitrary network of
    downstream reactors.
- id: Fuel Reservoir
  Reservoir:
    temperature: 300.0
    pressure: 101325.00000000001
    composition: CH4:1
  description: |-
    Create reservoirs for the two inlet streams and for the outlet stream.  The
    upstream reservoirs could be replaced by reactors, which might themselves be
    connected to reactors further upstream. The outlet reservoir could be
    replaced with a reactor with no outlet, if it is desired to integrate the
    composition leaving the mixer in time, or by an arbitrary network of
    downstream reactors.
- id: Mixer
  IdealGasReactor:
    temperature: 299.9999999999867
    pressure: 101326.46614484335
    composition: N2:0.719557,O2:0.193727,CH4:0.0774908,AR:0.00922509
    volume: 1.0
  description: |-
    Create a reactor for the mixer. A reactor is required instead of a
    reservoir, since the state will change with time if the inlet mass flow
    rates change or if there is chemistry occurring.
- id: Outlet Reservoir
  Reservoir:
    temperature: 300.0
    pressure: 101325.00000000003
    composition: N2:0.78,O2:0.21,AR:0.01
    mass_flow_rate: 0.6516985521312658
  mechanism: air.yaml
  description: |-
    Create reservoirs for the two inlet streams and for the outlet stream.  The
    upstream reservoirs could be replaced by reactors, which might themselves be
    connected to reactors further upstream. The outlet reservoir could be
    replaced with a reactor with no outlet, if it is desired to integrate the
    composition leaving the mixer in time, or by an arbitrary network of
    downstream reactors.

connections:
- id: Air Inlet
  MassFlowController: {}
  source: Air Reservoir
  target: Mixer
  description: |-
    Create two mass flow controllers connecting the upstream reservoirs to the
    mixer, and set their mass flow rates to values corresponding to
    stoichiometric combustion.
- id: Fuel Inlet
  MassFlowController: {}
  source: Fuel Reservoir
  target: Mixer
  description: |-
    Create two mass flow controllers connecting the upstream reservoirs to the
    mixer, and set their mass flow rates to values corresponding to
    stoichiometric combustion.
- id: Valve
  Valve:
    valve_coeff: 10.0
  source: Mixer
  target: Outlet Reservoir
  description: Connect the mixer to the downstream reservoir with a valve.
