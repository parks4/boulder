metadata:
  name: "Mixed Reactor Streams"
  description: "Complex multi-reactor network with interconnected streams"
  version: "3.0"
  author: "Boulder Configuration System"

simulation:
  mechanism: "gri30.yaml"
  time_step: 0.0005    # s
  max_time: 2.0        # s
  solver: "CVODE_BDF"
  relative_tolerance: 1.0e-8
  absolute_tolerance: 1.0e-12
  max_steps: 20000

components:
- id: reactor1
  IdealGasReactor:
    temperature: 1100      # K
    pressure: 101325       # Pa
    composition: "CH4:0.8,O2:1.6,N2:6.0"
    volume: 0.005          # m³

- id: reactor2
  IdealGasReactor:
    temperature: 900       # K
    pressure: 101325       # Pa
    composition: "H2:2,O2:1,N2:3.76"
    volume: 0.008          # m³

- id: res1
  Reservoir:
    temperature: 300       # K
    composition: "CH4:1,N2:2"

- id: res2
  Reservoir:
    temperature: 320       # K
    pressure: 151987       # Pa
    composition: "O2:1,N2:3.76"

- id: mixer1
  IdealGasReactor:
    temperature: 400       # K
    pressure: 101325       # Pa
    composition: "N2:1"
    volume: 0.002          # m³

connections:
- id: mfc1
  MassFlowController:
    mass_flow_rate: 0.03    # kg/s
  source: res1
  target: reactor1

- id: mfc2
  MassFlowController:
    mass_flow_rate: 0.04    # kg/s
  source: res2
  target: reactor1

- id: mfc3
  MassFlowController:
    mass_flow_rate: 0.025   # kg/s
  source: reactor1
  target: mixer1

- id: mfc4
  MassFlowController:
    mass_flow_rate: 0.035   # kg/s
  source: mixer1
  target: reactor2
